"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function initializeChat(_config){var node=eval(config.initialNode);Object.assign(config,_config),chatBox=document.querySelector(config.chatBox),choiceBox=document.querySelector(config.choiceBox),executeChatNode(config.initialNode)}function executeChatNode(_node){var node=void 0;node=_node.constructor===Array?random(_node):_node,node=eval(node),node.speech.constructor===Array&&node.speech[0]===RANDOM&&(node.speech=random(node.speech)),"string"==typeof node.speech&&(node.speech=[node.speech]);var speechBoxes=createAllSpeech(node.speech);speechBoxes.forEach(function(e,t){setTimeout(function(){chatBox.appendChild(e)},e.delay),setTimeout(function(){scrollChatBot(choiceBox)},t*config.delay+scrollDelay)});var whenSpeechIsDone=config.delay*(node.speech.length-1)+500;if("undefined"!=typeof node.next)return void setTimeout(function(){executeChatNode(node.next)},whenSpeechIsDone+config.delay-300);if("[object Object]"===Object.prototype.toString.call(node.choices)&&(node.choices=[node.choices]),"undefined"==typeof node.choices||node.choices.length<1)return void("undefined"!=typeof config.onChatEnd&&setTimeout(function(){config.onChatEnd()},whenSpeechIsDone));var totalDelayBetweenChoices=delayBetweenChoices*(node.choices.length-1),whenToScrollChoices=whenSpeechIsDone+choicesDelay,textBoxes=createAllChoices(node.choices);setTimeout(function(){textBoxes.forEach(function(e){choiceBox.appendChild(e)}),specialChoices&&(document.querySelector(config.choiceBox).classList.add("input"),autosizeInput(document.getElementById("input"),{minWidth:!0}),document.getElementById("input").focus())},whenSpeechIsDone+choicesDelay),setTimeout(function(){scrollChatBot(choiceBox)},whenToScrollChoices)}function random(e){var t="string"==typeof arguments[0]?[].concat(Array.prototype.slice.call(arguments)):e.slice(0);t[0]===RANDOM&&t.shift();var o=t[Math.floor(Math.random()*t.length)];return o}function createAllSpeech(e){var t=[];return e.forEach(function(e,o){var n={};n.text=e.constructor===Array?random(e):e,n.delay=o*config.delay,t.push(createSpeech(n))}),t}function createSpeech(e){var t=htmlToDOM(config.beforeSpeech+e.text+config.afterSpeech);return t.delay=e.delay,t}function createAllChoices(e){var t=[];return specialChoices=!1,e.forEach(function(o,n){var i=o;i.delay=delayBetweenChoices*n,i.hasOwnProperty("type")&&"input"===i.type?(specialChoices=!0,t.push(createInput(i)),e.length>1&&console.warn("Including multiple choices with an input box may or may not break the app.")):(i.text.constructor===Array&&(i.text=random(i.text)),t.push(createReply(i)))}),t}function createReply(_choice){var _this=this,_arguments=arguments,choice=_choice;"string"==typeof choice.callback&&(choice.callback=eval(choice.callback));var textBox=htmlToDOM(config.beforeChoice+choice.text+config.afterChoice);return textBox.style.cssText="animation-delay: "+choice.delay+"ms",textBox.addEventListener("click",function(){choiceBox.innerHTML="","undefined"!=typeof choice.callback&&choice.callback.apply(_this,_arguments),"undefined"!=typeof choice.next&&executeChatNode(choice.next)}),textBox}function createInput(_input){var _this2=this,_arguments2=arguments,input=_input,string='<input type="text" id="input" placeholder="Type and hit ENTER...">',textBox=htmlToDOM(config.beforeChoice+string+config.afterChoice);return textBox.style.cssText="animation-delay: "+input.delay+"ms","string"==typeof input.callback&&(input.callback=eval(input.callback)),textBox.addEventListener("keyup",function(){if(13===event.which){var e=document.getElementById("input");choiceBox.innerHTML="","undefined"!=typeof input.next&&executeChatNode(input.next);try{input.callback.apply(_this2,[e.value].concat(Array.prototype.slice.call(_arguments2)))}catch(e){console.error("Input boxes should have a callback.")}}}),textBox}function htmlToDOM(e){var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),t.contentDocument.open(),t.contentDocument.write(e),t.contentDocument.close();var o=t.contentDocument.body.firstChild;return document.body.removeChild(t),o}function scrollChatBot(e){var t=e.getBoundingClientRect(),o=t.top,n=e.clientHeight,i=window.innerHeight,c=window.pageYOffset||document.documentElement.scrollTop,a=c+o+n,r=a-i;c<r&&window.scroll({top:r,left:0,behavior:"smooth"})}function startChat(){initializeChat({initialNode:initialNode,delay:1200,chatBox:".chatbot",choiceBox:".reply",beforeSpeech:'<div class="box">',afterSpeech:"</div>",beforeChoice:'<div class="box">',afterChoice:"</div>",onChatEnd:deleteReplyBox})}function postEmail(){console.log("PUT to email database")}function timeOfDay(){var e=new Date,t=e.getHours();return t<12?"morning":t<18?"afternoon":"evening"}function deleteReplyBox(){document.querySelector(".reply").classList.add("end")}function changeStudentTo(e){var t=void 0;t=e===RANDOM?random(Object.keys(majors)):e;var o=peeps,n=void 0;if(n=e===RANDOM?[random(o)]:o.filter(function(e){return e.major===t}),1==n.length)n=n[0];else{if(!(n.length>1))return showStudent.speech=["Sorry, there are no "+majors[t]+"s in the system. Please pick a different concentration."],void(showStudent.next="someoneElse");n=random(n)}var i=n.hasOwnProperty("major")&&n.major.length>=1,c=i?majors[n.major]:"Digital Media & Design student",a=n.hasOwnProperty("location")&&n.location.length>=1,r=a?" from "+n.location:" from Storrs, CT";meetStudent.speech="May I introduce you to an -ATION "+c+r+"?";var s=[],l="";n.hasOwnProperty("work")&&n.work.length>=1&&(s=["Here is some of "+n.name+"'s work!"],"string"==typeof n.work&&(n.work=[n.work]),n.work.forEach(function(e){s.push('<img src="'+e+'">')}),l="also ");var h="You can "+l+"visit "+n.name+" here:";showStudent.speech=[].concat(_toConsumableArray(s),[h,'<a href="'+n.url+'" target="_blank">'+n.url+"</a>"])}function shuffle(e){for(var t,o,n=e.length;0!==n;)o=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[o],e[o]=t;return e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){return e.replace(n,"&nbsp;").replace(i,"&lt;").replace(c,"&gt;")}function t(){var e=document.createElement("div");return e.id=a,e.style.cssText="display:inline-block;height:0;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:nowrap;",document.body.appendChild(e),e}function o(o,n){function i(n){n=n||o.value||o.getAttribute("placeholder")||"",null===document.getElementById(a)&&(r=t()),r.style.cssText+=s,r.innerHTML=e(n);var i=window.getComputedStyle(r).width;return o.style.width=i,i}var c=window.getComputedStyle(o),s="box-sizing:"+c.boxSizing+";border-left:"+c.borderLeftWidth+" solid black;border-right:"+c.borderRightWidth+" solid black;font-family:"+c.fontFamily+";font-feature-settings:"+c.fontFeatureSettings+";font-kerning:"+c.fontKerning+";font-size:"+c.fontSize+";font-stretch:"+c.fontStretch+";font-style:"+c.fontStyle+";font-variant:"+c.fontVariant+";font-variant-caps:"+c.fontVariantCaps+";font-variant-ligatures:"+c.fontVariantLigatures+";font-variant-numeric:"+c.fontVariantNumeric+";font-weight:"+c.fontWeight+";letter-spacing:"+c.letterSpacing+";margin-left:"+c.marginLeft+";margin-right:"+c.marginRight+";padding-left:"+c.paddingLeft+";padding-right:"+c.paddingRight+";text-indent:"+c.textIndent+";text-transform:"+c.textTransform;o.addEventListener("input",function(){i()});var l=i();return n&&n.minWidth&&"0px"!==l&&(o.style.minWidth=l),i}var n=/\s/g,i=/>/g,c=/</g,a="__autosizeInputGhost",r=t();"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=o:window.autosizeInput=o}();var chatBox=void 0,choiceBox=void 0,RANDOM=null,specialChoices=!1,choicesDelay=270,delayBetweenChoices=200,scrollDelay=200,config={initialNode:"demoNode",chatBox:".chatbot",choiceBox:".replies",delay:1200,beforeSpeech:"<span>",afterSpeech:"</span>",beforeChoice:"<span>",afterChoice:"</span>",onChatEnd:function(){}},demoRandomSpeech=[RANDOM,"Hi there!","Hola!","Welcome to -ATION","Welcome back!"],otherNode={speech:"Bye!"},demoNode={speech:[demoRandomSpeech,"This is a chatbot demo."],choices:[{text:"Yeaa wassup",next:["demoNode","otherNode"]},{text:"Go away",next:"otherNode"},{text:["Go away!!","Shut up!"],next:{speech:"Fine. Bye!"}}]},firstTime=null===localStorage.getItem("firstTime");firstTime&&localStorage.setItem("firstTime","no");var initialNode=firstTime?"introduce":"welcomeBack",introduce={speech:["Welcome!","I'm Recon, a chat bot developed by the talented students at -ATION."],next:"meetStudent"},welcomeBack={speech:[RANDOM,"Ciao!","Hola!","It's good to see you again!","Welcome back!","Good "+timeOfDay()+"!"],next:["meetStudent","projects","pickOne"]},majors={web:"Web Developer","3d":"3D Artist",business:"Business Strategist",game:"Video Game Developer",motion:"Motion Graphics Artist"},meetStudent={speech:"This string should be replaced with a person's intro phrase.",choices:[{text:"Sure!",next:"showStudent"},{text:"Maybe someone else.",next:"someoneElse"},{text:"No thanks.",next:"pickOne"}]},someoneElse={speech:"Ok. Who would you like to meet?",choices:[{text:"A "+majors.web,next:"showStudent",callback:function(){changeStudentTo("web")}},{text:"A "+majors["3d"],next:"showStudent",callback:function(){changeStudentTo("3d")}},{text:"A "+majors.business,next:"showStudent",callback:function(){changeStudentTo("business")}},{text:"A "+majors.game,next:"showStudent",callback:function(){changeStudentTo("game")}},{text:"A "+majors.motion,next:"showStudent",callback:function(){changeStudentTo("motion")}},{text:"No one",next:"pickOne"}]},showStudent={speech:"This string should be replaced with a person and his/her content via changeStudentTo function.",next:"someoneElseAgain"},someoneElseAgain={speech:"Would you like to meet anybody else?",choices:[{text:"Yeah!",next:"someoneElse"},{text:"No thanks.",next:"pickOne"}]},creators={speech:"Would you like to see who created me?",choices:[{text:"Yeah!",next:"showCreators"},{text:"No thanks.",next:"someoneElse"}]},showCreators={speech:["It is my pleasure to introduce Gabe Rogan and Connor Michael.",'<a href="https://gaberogan.com"><img src="https://image.ibb.co/gX5qgF/profile_wide.jpg"></a><img src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/AAEAAQAAAAAAAARlAAAAJDA3YWQ3YzU4LTRlM2YtNDE1MC05OGVlLTBkMjVjZDM0NTI2Yw.jpg">',"Gabe was the designer and developer of this chatbot, and Connor taught me what to say!",'If you\'d like to see more of their work, visit <a href="https://gaberogan.com">gaberogan.com</a> or <a href="https://gaberogan.com">Connor\'s LinkedIn</a>'],next:"pickOne"},projects={speech:"Would you like to view some of our projects?",choices:[{text:"Yeah!",next:"seeProjects"},{text:"No thanks.",next:"pickOne"}]},seeProjects={speech:["Ok! Here are a few things we've worked on recently:",'<a href="http://ation.digitalmediauconn.org/project/skybox/"><img src="http://ation.digitalmediauconn.org/wp-content/uploads/2016/03/skybox-work2-600x0-c-default.jpg"></a>','<a href="http://ation.digitalmediauconn.org/project/ct-childrens-alliance/"><img src="http://ation.digitalmediauconn.org/wp-content/uploads/2016/10/ChildrensAlliance_Tile-600x0-c-default.jpg"></a>','<a href="http://ation.digitalmediauconn.org/project/what-is-a-persona/"><img src="http://ation.digitalmediauconn.org/wp-content/uploads/2016/04/persona-work2-600x0-c-default.jpg"></a>','If you\'d like to see more, visit <a href="http://ation.digitalmediauconn.org/work/" target="_blank">ation.digitalmediauconn.org</a>'],choices:[{text:"Who worked on these?",next:"whoWorkedOnThese"},{text:"Thanks for sharing!",next:{speech:"You're welcome!",next:"pickOne"}}]},whoWorkedOnThese={speech:["Every student at the top of this page worked on one of these projects.","Would you like to meet one of them?"],choices:[{text:"Sure!",next:"someoneElse"},{text:"No thanks.",next:"funTalking"}]},pickOne={speech:"Is there anything you'd like to know about?",choices:[{text:"Student concentrations.",next:"meetStudent"},{text:"Students!",next:"meetStudent"},{text:"Projects!",next:"seeProjects"},{text:"Nothin'.",next:"goodbye"}]},funTalking={speech:["Ok. It was fun talking!",["Cya later!","Au revoir!"]]},goodbye={speech:[RANDOM,"Ok, bye!","Cya later!","Au revoir!"]},peeps=void 0;fetch("/assets/json/people.json").then(function(e){if(e.ok)return e.text()}).then(function(e){peeps=JSON.parse(e),peeps=shuffle(peeps),changeStudentTo(RANDOM),peeps.forEach(function(e,t){var o=document.createElement("div");o.classList.add("person");var n=e.hasOwnProperty("pic")&&e.pic.length>=1;n||(e.pic="http://lorempixel.com/350/200/"),o.style.cssText="background-image: url("+e.pic+"); animation-delay: "+(200+50*t)+"ms";var i=document.createElement("p");i.innerHTML=e.name;var c=document.createElement("a");c.target="_blank",c.href=e.url,o.appendChild(i),c.appendChild(o);var a=document.querySelector(".people");a.insertBefore(c,a.childNodes[t])})}),!function(e,t,o){function n(){function n(e,t){this.scrollLeft=e,this.scrollTop=t}function i(e){return.5*(1-Math.cos(Math.PI*e))}function c(e){if("object"!=("undefined"==typeof e?"undefined":_typeof(e))||null===e||e.behavior===o||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&"smooth"===e.behavior)return!1;throw new TypeError("behavior not valid")}function a(o){var n,i,c;do o=o.parentNode,n=o===t.body,i=o.clientHeight<o.scrollHeight||o.clientWidth<o.scrollWidth,c="visible"===e.getComputedStyle(o,null).overflow;while(!n&&(!i||c));return n=i=c=null,o}function r(t){t.frame=e.requestAnimationFrame(r.bind(e,t));var o,n,c,a=u(),s=(a-t.startTime)/h;if(s=s>1?1:s,o=i(s),n=t.startX+(t.x-t.startX)*o,c=t.startY+(t.y-t.startY)*o,t.method.call(t.scrollable,n,c),n===t.x&&c===t.y)return void e.cancelAnimationFrame(t.frame)}function s(o,i,c){var a,s,l,h,p,f=u();o===t.body?(a=e,s=e.scrollX||e.pageXOffset,l=e.scrollY||e.pageYOffset,h=d.scroll):(a=o,s=o.scrollLeft,l=o.scrollTop,h=n),p&&e.cancelAnimationFrame(p),r({scrollable:a,method:h,startTime:f,startX:s,startY:l,x:i,y:c,frame:p})}if(!("scrollBehavior"in t.documentElement.style)){var l=e.HTMLElement||e.Element,h=468,d={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,scrollIntoView:l.prototype.scrollIntoView},u=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;e.scroll=e.scrollTo=function(){return c(arguments[0])?void d.scroll.call(e,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):void s.call(e,t.body,~~arguments[0].left,~~arguments[0].top)},e.scrollBy=function(){return c(arguments[0])?void d.scrollBy.call(e,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):void s.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))},l.prototype.scrollIntoView=function(){if(c(arguments[0]))return void d.scrollIntoView.call(this,arguments[0]||!0);var o=a(this),n=o.getBoundingClientRect(),i=this.getBoundingClientRect();o!==t.body?(s.call(this,o,o.scrollLeft+i.left-n.left,o.scrollTop+i.top-n.top),e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}}"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports={polyfill:n}:n()}(window,document);